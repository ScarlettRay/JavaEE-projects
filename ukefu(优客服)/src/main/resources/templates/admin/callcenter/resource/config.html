<form method="post" key="set-mine" action="/admin/callcenter/resource/save.html" class="layui-form">
	<input type="hidden" name="id" value="${pbxHost.id!''}">
	<div class="row">
		<div class="col-lg-12">
			<div class="ukefu-customer-div setting-wrapper">
				<div class="box default-box">
					<div class="box-header">
						<h3 class="box-title">网络配置</h3>
					</div>
					<div class="box-body ukefu-im-theme">
						<div class="row">
							<div class="col-lg-8">
								<div class="ukefu-webim-prop">
									<div class="ukefu-webim-tl" style="clear:both;">1、语音平台服务器名称<font color="red">（必填项*）</font></div>
									<div class="box-item">
										<div class="row">
											<div class="col-lg-8">
												<p>语音接入服务器名称</p>
												<p style="color:#888888;font-size:13px;margin-top:10px;">FreeSwitch服务器名称</p>
											</div>
											<div class="col-lg-4" style="text-align:right;">
												<input type="text" name="name" id="name" value="${pbxHost.name!''}" required="required" lay-verify="required" alue="" autocomplete="off" class="layui-input">
											</div>
										</div>
									</div>
								</div>
								<div class="ukefu-webim-prop">
									<div class="ukefu-webim-tl" style="clear:both;">2、语音平台服务器IP地址 <font color="red">（必填项*）</font></div>
									<div class="box-item">
										<div class="row">
											<div class="col-lg-8">
												<p>语音接入服务的网络地址</p>
												<p style="color:#888888;font-size:13px;margin-top:10px;">FreeSwitch服务器的网络IPv4地址，如果是其他厂商的设备，请填写软电话的接入地址</p>
											</div>
											<div class="col-lg-4" style="text-align:right;">
												<input type="text" name="ipaddr" id="ipaddr" value="${pbxHost.ipaddr!''}" required="required" lay-verify="required" alue="" autocomplete="off" class="layui-input">
											</div>
										</div>
									</div>
								</div>
								<div class="ukefu-webim-prop">
									<div class="ukefu-webim-tl" style="clear:both;">3、语音平台服务器主机名称 <font color="red">（必填项*）</font></div>
									<div class="box-item">
										<div class="row">
											<div class="col-lg-8">
												<p>语音接入服务的网络地址</p>
												<p style="color:#888888;font-size:13px;margin-top:10px;">FreeSwitch服务器的网络地址，如果是其他厂商的设备，请填写软电话的接入地址</p>
											</div>
											<div class="col-lg-4" style="text-align:right;">
												<input type="text" name="hostname" id="hostname" value="${pbxHost.hostname!''}" required="required" lay-verify="required" alue="" autocomplete="off" class="layui-input">
											</div>
										</div>
									</div>
								</div>
								<div class="ukefu-webim-prop">
									<div class="ukefu-webim-tl" style="clear:both;">4、语音平台服务端口</div>
									<div class="box-item">
										<div class="row">
											<div class="col-lg-8">
												<p>语音接入服务的网络端口</p>
												<p style="color:#888888;font-size:13px;margin-top:10px;">FreeSwitch服务器的网络端口，如果是其他厂商的设备，根据需要填写</p>
											</div>
											<div class="col-lg-4" style="text-align:right;">
												<input type="text" name="port" id="port" lay-verify="number" value="${pbxHost.port}" autocomplete="off" class="layui-input">
											</div>
										</div>
									</div>
								</div>
								
								<div class="ukefu-webim-prop">
									<div class="ukefu-webim-tl" style="clear:both;">5、语音平台服务访问密码</div>
									<div class="box-item">
										<div class="row">
											<div class="col-lg-8">
												<p>连接语音服务器的密码</p>
												<p style="color:#888888;font-size:13px;margin-top:10px;">FreeSwitch服务器的网络访问密码，如未修改，无需填写</p>
											</div>
											<div class="col-lg-4" style="text-align:right;">
												<input type="password" name="password" id="password" value="" autocomplete="off" class="layui-input">
											</div>
										</div>
									</div>
								</div>
								
								<div class="ukefu-webim-prop">
									<div class="ukefu-webim-tl" style="clear:both;">6、语音设备类型</div>
									<div class="box-item">
										<div class="row">
											<div class="col-lg-8">
												<p>语音设备的类型，按照厂商选择</p>
												<p style="color:#888888;font-size:13px;margin-top:10px;">不同厂商设备的配置参数和链接方式可能会不同</p>
											</div>
											<div class="col-lg-4">
												<select name="device">
													<option value="default" <#if pbxHost?? && pbxHost.device?? && pbxHost.device == "default">selected="selected"</#if>>默认设备</option>
												</select>
											</div>
										</div>
									</div>
								</div>
								
								
								<div class="ukefu-webim-prop">
									<div class="ukefu-webim-tl" style="clear:both;">7、FreeSwitch安装路径</div>
									<div class="box-item">
										<div class="row">
											<div class="col-lg-8">
												<p>FreeSwitch的安装路径</p>
												<p style="color:#888888;font-size:13px;margin-top:10px;">FreeSwitch安装的根目录，Linux下的默认安装路径是/usr/local/freeswitch</p>
											</div>
											<div class="col-lg-4" style="text-align:right;">
												<input type="text" name="fspath" id="fspath" value="${pbxHost.fspath!''}" autocomplete="off" class="layui-input">
											</div>
										</div>
									</div>
								</div>
								
								<div class="ukefu-webim-prop">
									<div class="ukefu-webim-tl" style="clear:both;">8、FreeSwitch服务器录音文件路径</div>
									<div class="box-item">
										<div class="row">
											<div class="col-lg-8">
												<p>FreeSwitch的录音文件存放位置</p>
												<p style="color:#888888;font-size:13px;margin-top:10px;">FreeSwitch安装的根目录，录音文件默认存放位置是%INSTALLPATH%/recordings/callcenter</p>
											</div>
											<div class="col-lg-4" style="text-align:right;">
												<input type="text" name="recordpath" id="recordpath" value="${pbxHost.recordpath!''}" autocomplete="off" class="layui-input">
											</div>
										</div>
									</div>
								</div>
								
								<div class="ukefu-webim-prop">
									<div class="ukefu-webim-tl" style="clear:both;">9、语音服务IVR资源文件路径</div>
									<div class="box-item">
										<div class="row">
											<div class="col-lg-8">
												<p>IVR资源文件存放位置</p>
												<p style="color:#888888;font-size:13px;margin-top:10px;">FreeSwitch使用的IVR语音文件存放目录，IVR文件默认存放位置是%INSTALLPATH%/sounds/en/us/callie/ivr/8000</p>
											</div>
											<div class="col-lg-4" style="text-align:right;">
												<input type="text" name="ivrfile" id="ivrpath" value="${pbxHost.ivrpath!''}" autocomplete="off" class="layui-input">
											</div>
										</div>
									</div>
								</div>
								
								<div class="ukefu-webim-prop">
									<div class="ukefu-webim-tl" style="clear:both;">10、启用话机端自动应答（Call Info）</div>
									<div class="box-item">
										<div class="row">
											<div class="col-lg-8">
												<p>启用此功能后，回拨的时候，坐席话机会启用自动应答功能</p>
												<p style="color:#888888;font-size:13px;margin-top:10px;">需要SIP话机支持此功能</p>
											</div>
											<div class="col-lg-4" style="text-align:right;">
												<input type="checkbox" title="启用" name="autoanswer" id="autoanswer" <#if pbxHost?? && pbxHost.autoanswer>checked="checked"</#if>>
											</div>
										</div>
									</div>
								</div>
								
								<div class="ukefu-webim-prop">
									<div class="ukefu-webim-tl" style="clear:both;">11、启用话机端自动应答（SIP Auto Answer ）</div>
									<div class="box-item">
										<div class="row">
											<div class="col-lg-8">
												<p>启用此功能后，回拨的时候，坐席话机会启用自动应答功能</p>
												<p style="color:#888888;font-size:13px;margin-top:10px;">需要SIP话机支持此功能</p>
											</div>
											<div class="col-lg-4" style="text-align:right;">
												<input type="checkbox" title="启用" name="sipautoanswer" id="sipautoanswer" <#if pbxHost?? && pbxHost.sipautoanswer>checked="checked"</#if>>
											</div>
										</div>
									</div>
								</div>
								
								<div class="ukefu-webim-prop">
									<div class="ukefu-webim-tl" style="clear:both;">12、启用呼叫中心功能模块</div>
									<div class="box-item">
										<div class="row">
											<div class="col-lg-8">
												<p>启用此功能后，呼叫中心相关功能启用</p>
												<p style="color:#888888;font-size:13px;margin-top:10px;">需要预先配置Freeswitch呼叫中心功能模块</p>
											</div>
											<div class="col-lg-4" style="text-align:right;">
												<input type="checkbox" title="启用" name="callcenter" id="callcenter" <#if pbxHost?? && pbxHost.callcenter>checked="checked"</#if>>
											</div>
										</div>
									</div>
								</div>
								
								<div class="ukefu-webim-prop">
									<div class="ukefu-webim-tl" style="clear:both;">13、发起呼叫的默认编码</div>
									<div class="box-item">
										<div class="row">
											<div class="col-lg-8">
												<p>发起呼叫的请求参数</p>
												<p style="color:#888888;font-size:13px;margin-top:10px;">FreeSwitch配置选项，通过软电话条发起呼叫是使用</p>
											</div>
											<div class="col-lg-4" style="text-align:right;">
												<input type="text" name="abscodec" id="abscodec" value="${pbxHost.abscodec!''}" autocomplete="off" class="layui-input">
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-lg-3"></div>
		<div class="col-lg-9">
			<div class="layui-form-item">
			  <div class="layui-input-block">
				<button class="layui-btn" lay-submit="" lay-filter="formDemo">保存</button>
				<button type="reset" class="layui-btn layui-btn-primary">重置</button>
			  </div>
			</div>
		</div>
	</div>
</form>	
<script language="javascript"> 		
	layui.use('form', function(){
		var form = layui.form();
		form.render('select'); //刷新select选择框渲染
		form.on("checkbox(timeout)" , function(data){
			if(data.elem.checked == true){
				$('#timeout_tip').show();		
			}else{
				$('#timeout_tip').hide();
			}
		});
		form.on("checkbox(hourcheck)" , function(data){
			if(data.elem.checked == true){
				$('#hourcheck_tip').show();		
			}else{
				$('#hourcheck_tip').hide();
			}
		});
		form.on("checkbox(retimeout)" , function(data){
			if(data.elem.checked == true){
				$('#re_timeout_tip').show();		
			}else{
				$('#re_timeout_tip').hide();
			}
		});
		form.on("checkbox(agentreplaytimeout)" , function(data){
			if(data.elem.checked == true){
				$('#agentreplay').show();		
			}else{
				$('#agentreplay').hide();
			}
		});
	});
	$('#wh_time_range').on("click" , function(){
		var timerange = $("#wh_start_h").val()+":"+$("#wh_start_m").val()+"~"+$("#wh_end_h").val()+":"+$("#wh_end_m").val() ;
		var id = "wh_"+ $("#wh_start_h").val()+$("#wh_start_m").val()+$("#wh_end_h").val()+$("#wh_end_m").val() ;
		if($("#"+id).length == 0){
			$('#workhours').append("<small id='"+id+"' class='ukefu-timerange layui-btn layui-btn-normal'>"+timerange+" <i class='layui-icon'>&#x1006;</i><input type='hidden' name='workinghours' value='"+timerange+"'/></small>");
		}
	});
	$(document).on("click" , ".ukefu-timerange", function(){
		var target = $(this);
		var index = top.layer.confirm("请确认是否移除时间段？", {icon: 3, title:'提示'}, function(text, cindex){
			top.layer.close(index);
			$(target).remove() ;
		});
		
	});
			
</script>